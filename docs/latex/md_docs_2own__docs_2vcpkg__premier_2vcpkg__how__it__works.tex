\chapter{VCPKG How It Works?}
\hypertarget{md_docs_2own__docs_2vcpkg__premier_2vcpkg__how__it__works}{}\label{md_docs_2own__docs_2vcpkg__premier_2vcpkg__how__it__works}\index{VCPKG How It Works?@{VCPKG How It Works?}}
\label{md_docs_2own__docs_2vcpkg__premier_2vcpkg__how__it__works_autotoc_md259}%
\Hypertarget{md_docs_2own__docs_2vcpkg__premier_2vcpkg__how__it__works_autotoc_md259}%



\begin{DoxyItemize}
\item Summary
\item Installed vs Package directories
\begin{DoxyItemize}
\item Installed Directory vs. Package Directory
\item Installing Libraries
\item How vcpkg works\+:
\end{DoxyItemize}
\item Steps vcpkg takes to install a library
\item What is the role of Package directory in these steps?
\end{DoxyItemize}\hypertarget{md_docs_2own__docs_2vcpkg__premier_2vcpkg__how__it__works_autotoc_md260}{}\doxysection{\texorpdfstring{Summary}{Summary}}\label{md_docs_2own__docs_2vcpkg__premier_2vcpkg__how__it__works_autotoc_md260}
Here, we will demonstrate the difference between installed directory and package directory for vcpkg assume I have installed it in my home directory \texorpdfstring{$\sim$}{\string~}/vcpkg, using mac\+OS add example when I install globally and when I install a library using the manifest file \doxylink{class_vector__2d_a6d09fb691e01f179efcbef03bef13b9c}{vcpkg.\+json} then elaborate later on how vcpkg works with all necessary details\hypertarget{md_docs_2own__docs_2vcpkg__premier_2vcpkg__how__it__works_autotoc_md261}{}\doxysection{\texorpdfstring{Installed vs Package directories}{Installed vs Package directories}}\label{md_docs_2own__docs_2vcpkg__premier_2vcpkg__how__it__works_autotoc_md261}
{\ttfamily vcpkg} is a cross-\/platform package manager that makes it easy to manage dependencies for your C++ projects. Here, I\textquotesingle{}ll explain the difference between the installed directory and the package directory, and then delve deeper into how {\ttfamily vcpkg} operates.\hypertarget{md_docs_2own__docs_2vcpkg__premier_2vcpkg__how__it__works_autotoc_md262}{}\doxysubsection{\texorpdfstring{Installed Directory vs. Package Directory}{Installed Directory vs. Package Directory}}\label{md_docs_2own__docs_2vcpkg__premier_2vcpkg__how__it__works_autotoc_md262}

\begin{DoxyEnumerate}
\item {\bfseries{Installed Directory}}\+: This is where {\ttfamily vcpkg} stores all the libraries that you have installed. When you install a package, the compiled binaries, headers, and other files related to the package are placed in this directory. By default, the installed directory for {\ttfamily vcpkg} is the {\ttfamily installed/} subdirectory inside the main {\ttfamily vcpkg} directory.

For your case (assuming you installed {\ttfamily vcpkg} in {\ttfamily \texorpdfstring{$\sim$}{\string~}/vcpkg}), the installed directory would be\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\string~/vcpkg/installed/}

\end{DoxyCode}

\item {\bfseries{Package Directory}}\+: This is where the sources and portfiles for each package reside. A portfile is a script that {\ttfamily vcpkg} uses to build and install a library. The package directory contains a subdirectory for each available package, and that subdirectory will contain the portfile and any patches or additional files needed for the build.

For your setup, the package directory would be\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\string~/vcpkg/ports/}

\end{DoxyCode}

\end{DoxyEnumerate}\hypertarget{md_docs_2own__docs_2vcpkg__premier_2vcpkg__how__it__works_autotoc_md263}{}\doxysubsection{\texorpdfstring{Installing Libraries}{Installing Libraries}}\label{md_docs_2own__docs_2vcpkg__premier_2vcpkg__how__it__works_autotoc_md263}

\begin{DoxyEnumerate}
\item {\bfseries{Globally}}\+: When you install a library globally, you typically use the following command\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{./vcpkg\ install\ <library-\/name>}

\end{DoxyCode}


This will download, build, and install the library to the {\ttfamily installed/} directory. You can then use the library in your projects by pointing your build system to the appropriate directories inside {\ttfamily installed/}.
\item {\bfseries{Using Manifest File (\doxylink{class_vector__2d_a6d09fb691e01f179efcbef03bef13b9c}{vcpkg.\+json})}}\+: With the manifest mode, you can specify your project\textquotesingle{}s dependencies in a {\ttfamily \doxylink{class_vector__2d_a6d09fb691e01f179efcbef03bef13b9c}{vcpkg.\+json}} file. When you build your project, {\ttfamily vcpkg} will automatically ensure that all required libraries are installed.

A simple example of a {\ttfamily \doxylink{class_vector__2d_a6d09fb691e01f179efcbef03bef13b9c}{vcpkg.\+json}} file might look like\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ "{}name"{}:\ "{}my-\/project"{},}
\DoxyCodeLine{\ \ "{}version-\/string"{}:\ "{}1.0"{},}
\DoxyCodeLine{\ \ "{}dependencies"{}:\ ["{}fmt"{},\ "{}boost"{}]}
\DoxyCodeLine{\}}

\end{DoxyCode}


When you build your project, {\ttfamily vcpkg} will check the {\ttfamily \doxylink{class_vector__2d_a6d09fb691e01f179efcbef03bef13b9c}{vcpkg.\+json}} file, and if the libraries (like {\ttfamily fmt} and {\ttfamily boost} in this case) are not installed, it will install them for you.
\end{DoxyEnumerate}\hypertarget{md_docs_2own__docs_2vcpkg__premier_2vcpkg__how__it__works_autotoc_md264}{}\doxysubsection{\texorpdfstring{How vcpkg works\+:}{How vcpkg works:}}\label{md_docs_2own__docs_2vcpkg__premier_2vcpkg__how__it__works_autotoc_md264}

\begin{DoxyEnumerate}
\item {\bfseries{Portfiles}}\+: For each library, there\textquotesingle{}s a corresponding portfile in the {\ttfamily ports/} directory. This portfile is a CMake script that tells {\ttfamily vcpkg} how to fetch, extract, build, and install the library.
\item {\bfseries{Binary Caching}}\+: {\ttfamily vcpkg} can cache compiled binaries. This means that once you\textquotesingle{}ve built a library, subsequent installations (on the same machine or others, if shared) can use the cached binaries instead of building from source, speeding up the process.
\item {\bfseries{Toolchain Integration}}\+: {\ttfamily vcpkg} provides integration with various build systems. For instance, if you\textquotesingle{}re using CMake, you can point CMake to the {\ttfamily \doxylink{class_vector__2d_a6d09fb691e01f179efcbef03bef13b9c}{vcpkg.\+cmake}} toolchain file, and CMake will automatically find and use libraries installed by {\ttfamily vcpkg}.
\item {\bfseries{Triplets}}\+: Triplets define the build configuration for packages. For instance, if you want to build a library for x64 and Windows, you would use the {\ttfamily x64-\/windows} triplet. There are default triplets provided by {\ttfamily vcpkg}, but you can also create custom ones.
\item {\bfseries{Manifest Mode}}\+: As mentioned earlier, with manifest mode, you can specify your project\textquotesingle{}s dependencies in a {\ttfamily \doxylink{class_vector__2d_a6d09fb691e01f179efcbef03bef13b9c}{vcpkg.\+json}} file. This makes it easy to ensure that all developers on a project have the same dependencies installed.
\item {\bfseries{Versioning}}\+: {\ttfamily vcpkg} also offers versioning features, allowing you to specify which versions of libraries you want to use in your project.
\item {\bfseries{Cross-\/\+Platform}}\+: {\ttfamily vcpkg} supports multiple platforms, including Windows, mac\+OS, and Linux. This means that you can use the same package manager and process to manage dependencies across different platforms.
\end{DoxyEnumerate}
\begin{DoxyItemize}
\item To conclude, {\ttfamily vcpkg} is a powerful tool that streamlines the process of managing C++ libraries across various platforms. Its flexible features, like manifests and versioning, make it a popular choice for modern C++ development.
\end{DoxyItemize}\hypertarget{md_docs_2own__docs_2vcpkg__premier_2vcpkg__how__it__works_autotoc_md265}{}\doxysection{\texorpdfstring{Steps vcpkg takes to install a library}{Steps vcpkg takes to install a library}}\label{md_docs_2own__docs_2vcpkg__premier_2vcpkg__how__it__works_autotoc_md265}
Certainly, here\textquotesingle{}s a concise step-\/by-\/step overview of how {\ttfamily vcpkg} installs a library in your root project directory using the manifest file {\ttfamily \doxylink{class_vector__2d_a6d09fb691e01f179efcbef03bef13b9c}{vcpkg.\+json}}\+:


\begin{DoxyEnumerate}
\item {\bfseries{Detect Manifest File}}\+: {\ttfamily vcpkg} checks if a {\ttfamily \doxylink{class_vector__2d_a6d09fb691e01f179efcbef03bef13b9c}{vcpkg.\+json}} file exists in your project\textquotesingle{}s root directory.
\item {\bfseries{Parse {\ttfamily \doxylink{class_vector__2d_a6d09fb691e01f179efcbef03bef13b9c}{vcpkg.\+json}}}}\+: If the manifest file is found, {\ttfamily vcpkg} reads and parses the {\ttfamily \doxylink{class_vector__2d_a6d09fb691e01f179efcbef03bef13b9c}{vcpkg.\+json}} to determine which libraries and their respective versions are required.
\item {\bfseries{Check Installed Libraries}}\+: {\ttfamily vcpkg} checks the {\ttfamily installed/} directory to see if the required libraries (and the specified versions) are already installed.
\item {\bfseries{Download Missing Libraries}}\+: For any libraries that aren\textquotesingle{}t already installed, {\ttfamily vcpkg} fetches the source code.
\item {\bfseries{Compile Libraries}}\+: {\ttfamily vcpkg} compiles the downloaded libraries using the instructions provided in their respective portfiles.
\item {\bfseries{Install Libraries}}\+: Once compiled, {\ttfamily vcpkg} installs the libraries into the {\ttfamily installed/} directory.
\item {\bfseries{Integration}}\+: If you\textquotesingle{}re using a build system like CMake, and you\textquotesingle{}ve integrated {\ttfamily vcpkg}, the build system will now be able to find and link against the newly installed libraries.
\end{DoxyEnumerate}

That\textquotesingle{}s a quick overview of the steps involved when using {\ttfamily vcpkg} with a manifest file.\hypertarget{md_docs_2own__docs_2vcpkg__premier_2vcpkg__how__it__works_autotoc_md266}{}\doxysection{\texorpdfstring{What is the role of Package directory in these steps?}{What is the role of Package directory in these steps?}}\label{md_docs_2own__docs_2vcpkg__premier_2vcpkg__how__it__works_autotoc_md266}
When using the manifest mode with {\ttfamily \doxylink{class_vector__2d_a6d09fb691e01f179efcbef03bef13b9c}{vcpkg.\+json}}, the {\ttfamily vcpkg/packages} directory is generally not used in the same way as with the traditional {\ttfamily vcpkg install \texorpdfstring{$<$}{<}package\+\_\+name\texorpdfstring{$>$}{>}} command.

However, the {\ttfamily vcpkg/packages} directory still plays a role behind the scenes. Here\textquotesingle{}s a brief breakdown\+:


\begin{DoxyEnumerate}
\item \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\+Traditional Installation ({\ttfamily vcpkg install \texorpdfstring{$<$}{<}package\+\_\+name\texorpdfstring{$>$}{>}})\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\+:
\begin{DoxyItemize}
\item Source code is downloaded and extracted.
\item Library is built.
\item Built results are temporarily stored in the {\ttfamily vcpkg/buildtrees} directory.
\item Successful builds are copied over to the {\ttfamily vcpkg/packages} directory.
\item Finally, from the {\ttfamily vcpkg/packages} directory, the relevant files (binaries, headers, etc.) are copied and installed to the {\ttfamily vcpkg/installed} directory.
\end{DoxyItemize}
\item {\bfseries{Manifest Mode (using {\ttfamily \doxylink{class_vector__2d_a6d09fb691e01f179efcbef03bef13b9c}{vcpkg.\+json}})}}\+:
\begin{DoxyItemize}
\item The general process of downloading, building, and installing is similar.
\item The {\ttfamily vcpkg/packages} directory can still be used as an intermediate storage location before the libraries are installed to the {\ttfamily vcpkg/installed} directory. However, the focus with manifest mode is on the final installation in the {\ttfamily vcpkg/installed} directory, making the presence of the {\ttfamily vcpkg/packages} directory less noticeable to the user.
\end{DoxyItemize}
\end{DoxyEnumerate}
\begin{DoxyItemize}
\item In summary, while the manifest mode emphasizes the use of the {\ttfamily vcpkg/installed} directory, the {\ttfamily vcpkg/packages} directory still exists and can be used as an intermediate step, even if it\textquotesingle{}s less prominent in this workflow.
\item let\textquotesingle{}s elaborate on the ASCII diagram to better showcase the roles of the {\ttfamily installed} and {\ttfamily packages} directories\+:
\end{DoxyItemize}


\begin{DoxyCode}{0}
\DoxyCodeLine{+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+}
\DoxyCodeLine{|\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{|\ vcpkg.json\ \ \ \ \ \ |}
\DoxyCodeLine{|\ (Specify\ Libs)\ \ |}
\DoxyCodeLine{|\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+}
\DoxyCodeLine{\ \ \ \ \ \ \ \ |}
\DoxyCodeLine{\ \ \ \ \ \ \ \ V}
\DoxyCodeLine{+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+}
\DoxyCodeLine{|\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{|\ Download\ Source\ \ |}
\DoxyCodeLine{|\ \&\ Compile\ Libs\ \ \ |}
\DoxyCodeLine{|\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+}
\DoxyCodeLine{\ \ \ \ \ \ \ \ |}
\DoxyCodeLine{\ \ \ \ \ \ \ \ V}
\DoxyCodeLine{+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+}
\DoxyCodeLine{|\ \ vcpkg/buildtrees\ \ \ \ \ \ |}
\DoxyCodeLine{|\ \ (Compilation\ \&\ \ \ \ \ \ \ \ |}
\DoxyCodeLine{|\ Intermediate\ Artifacts)|}
\DoxyCodeLine{+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+}
\DoxyCodeLine{\ \ \ \ \ \ \ \ |}
\DoxyCodeLine{\ \ \ \ \ \ \ \ V}
\DoxyCodeLine{+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+}
\DoxyCodeLine{|\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{|\ vcpkg/packages\ \ |}
\DoxyCodeLine{|\ (Staging\ before\ |}
\DoxyCodeLine{|\ Final\ Install)\ \ |}
\DoxyCodeLine{|\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+}
\DoxyCodeLine{\ \ \ \ \ \ \ \ |}
\DoxyCodeLine{\ \ \ \ \ \ \ \ V}
\DoxyCodeLine{+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+}
\DoxyCodeLine{|\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{|\ vcpkg/installed\ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{|\ (Final\ Installation\ \&\ \ \ |}
\DoxyCodeLine{|\ Libraries\ Ready\ for\ Use)|}
\DoxyCodeLine{|\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+}

\end{DoxyCode}



\begin{DoxyEnumerate}
\item {\ttfamily \doxylink{class_vector__2d_a6d09fb691e01f179efcbef03bef13b9c}{vcpkg.\+json}} specifies which libraries and their respective versions are needed for the project.
\item The required libraries\textquotesingle{} source code is downloaded, and the libraries are compiled.
\item The {\ttfamily vcpkg/buildtrees} directory is used for compilation and as a storage for intermediate build artifacts.
\item Successful builds are moved to the {\ttfamily vcpkg/packages} directory, which acts as a staging area before final installation.
\item Libraries are then installed into the {\ttfamily vcpkg/installed} directory, where they are ready for use in projects.
\end{DoxyEnumerate}

This process streamlines library management in the project, ensuring all dependencies are correctly installed and available for use. 